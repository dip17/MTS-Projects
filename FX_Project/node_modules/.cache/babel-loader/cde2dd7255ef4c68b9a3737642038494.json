{"ast":null,"code":"var _jsxFileName = \"/home/mts/Vishal/src/components/VideoAudioCall/NewAudioCallIndex.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { Modal, Container, Row, Col, Button, Form, Image, Media, InputGroup, FormControl } from \"react-bootstrap\";\nimport \"./VideoAudioCall.css\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { fetchSingleAudioCallStart, endAudioCallStart, joinAudioCallStart, addAudioCallMessageContent, fetchAudioCallChatMessageStart } from \"../../store/actions/PrivateCallAction\";\nimport AgoraRTC from \"agora-rtc-sdk-ng\";\nimport useAgoraRTC from \"../../hooks/useAgoraRTC\";\nimport { connect } from \"react-redux\";\nimport { translate, t } from \"react-multi-lang\";\nimport configuration from \"react-global-configuration\";\nimport SendTipModal from \"../helper/SendTipModal\";\nimport SendTipPaymentModal from \"../Model/PaymentModal/SendTipPaymentModal\";\nimport AgoraMediaPlayer from \"../helper/AgoraMediaPlayer\";\nimport NewVideoAudioCallChatIndex from \"./NewVideoAudioCallChatIndex\";\nimport io from \"socket.io-client\";\nimport { createNotification } from \"react-redux-notify\";\nimport { getSuccessNotificationMessage } from \"../helper/NotificationMessage\";\nlet chatSocket;\nconst rtcclient = AgoraRTC.createClient({\n  mode: \"rtc\",\n  codec: \"vp8\"\n});\nconst NewAudioCallIndex = props => {\n  const history = useHistory();\n  const {\n    localAudioTrack,\n    leaveRtcChannel,\n    joinAudio,\n    joinState,\n    remoteUsers,\n    isStreamEnded,\n    muteAudio,\n    mediaStatus\n  } = useAgoraRTC(rtcclient);\n  const [noError, setNoError] = useState(false);\n  const [showTipModal, setShowTipModal] = useState(false);\n  const [inputMessage, setInputMessage] = useState(\"\");\n  const closeTipModal = () => {\n    setShowTipModal(false);\n  };\n  useEffect(() => {\n    props.dispatch(fetchSingleAudioCallStart({\n      audio_call_request_unique_id: props.match.params.audio_call_request_unique_id\n    }));\n  }, []);\n  useEffect(() => {\n    if (!props.singleAudioCall.loading) {\n      handleJoin();\n    }\n  }, [props.singleAudioCall.loading]);\n  const [skipRender, setSkipRender] = useState({\n    initial: true,\n    completed: false\n  });\n  const [skip, setSkip] = useState(true);\n  useEffect(() => {\n    if (!skip && !props.joinAudioCall.loading) {\n      if (Object.keys(props.joinAudioCall.success).length > 0) {\n        setNoError(true);\n      } else {\n        window.location.assign(props.singleAudioCall.data.audio_call_request.is_model === 0 ? \"/audio-calls-sent\" : \"/audio-calls-received\");\n      }\n    }\n    setSkip(false);\n  }, [props.joinAudioCall]);\n  useEffect(() => {\n    if (!skipRender.initial && !skipRender.completed && remoteUsers.length > 0) {\n      const notificationMessage = getSuccessNotificationMessage(\"caller Joined\");\n      props.dispatch(createNotification(notificationMessage));\n      setSkipRender({\n        initial: false,\n        completed: true\n      });\n    } else {\n      setSkipRender({\n        initial: false,\n        completed: false\n      });\n    }\n  }, [remoteUsers]);\n  const handleJoin = () => {\n    joinAudio(configuration.get(\"configData.agora_app_id\"), props.singleAudioCall.data.audio_call_request.virtual_id, props.singleAudioCall.data.audio_call_request.agora_token ? props.singleAudioCall.data.audio_call_request.agora_token : null);\n  };\n  const leaveCall = () => {\n    if (window.confirm(\"are you sure to leave call?\")) {\n      props.dispatch(endAudioCallStart({\n        audio_call_request_id: props.match.params.audio_call_request_id\n      }));\n      leaveRtcChannel();\n      window.location.assign(\"/audio-calls-history\");\n    } else {}\n  };\n  useEffect(() => {\n    if (isStreamEnded) {\n      props.dispatch(endAudioCallStart({\n        audio_call_request_id: props.match.params.audio_call_request_id\n      }));\n      window.location.assign(\"/audio-calls-history\");\n    }\n  }, [isStreamEnded]);\n  useEffect(() => {\n    if (joinState) {\n      props.dispatch(joinAudioCallStart({\n        audio_call_request_id: props.singleAudioCall.data.audio_call_request.audio_call_request_id\n      }));\n    }\n  }, [joinState]);\n  useEffect(() => {\n    if (!props.singleAudioCall.loading) {\n      props.dispatch(fetchAudioCallChatMessageStart({\n        audio_call_request_id: props.singleAudioCall.data.audio_call_request.audio_call_request_id\n      }));\n      chatSocketConnect(props.singleAudioCall.data.audio_call_request.audio_call_request_unique_id);\n    }\n  }, [props.singleAudioCall.loading]);\n  const chatSocketConnect = id => {\n    // check the socket url is configured\n    let chatSocketUrl = configuration.get(\"configData.chat_socket_url\");\n    if (chatSocketUrl && id) {\n      chatSocket = io(chatSocketUrl, {\n        query: `room : audio_call_` + id + ``\n      });\n      chatSocket.emit(\"audio call update sender\", {\n        commonid: `audio_call_` + id + ``\n      });\n      chatSocket.on(\"audio call chat\", newData => {\n        let content = [];\n        content.push(newData);\n        props.dispatch(addAudioCallMessageContent(content));\n      });\n    }\n  };\n  const handleChatSubmit = event => {\n    event.preventDefault();\n    if (inputMessage) {\n      let chatData = [{\n        loggedin_user_id: localStorage.getItem(\"userId\"),\n        user_id: localStorage.getItem(\"userId\"),\n        model_id: props.singleAudioCall.data.audio_call_request.model_id,\n        audio_call_request_id: props.singleAudioCall.data.audio_call_request.audio_call_request_id,\n        message: inputMessage,\n        from_username: localStorage.getItem(\"username\"),\n        from_userpicture: localStorage.getItem(\"user_picture\"),\n        audio_call_unique_id: props.singleAudioCall.data.audio_call_request.audio_call_request_unique_id,\n        created: new Date()\n      }];\n      chatSocket.emit(\"audio call chat\", chatData[0]);\n      props.dispatch(addAudioCallMessageContent(chatData));\n      setInputMessage(\"\");\n    }\n  };\n  useEffect(() => {\n    scrollDownChat();\n  }, [props.audioCallChatMessage.data]);\n  const scrollDownChat = () => {\n    const parent = document.querySelector(\"#chat-container\");\n    const objDiv = document.querySelector(\".video-call-chat-room\");\n    if (objDiv != null) {\n      parent.scrollTop = objDiv.scrollHeight;\n    }\n  };\n  if (props.singleAudioCall.loading) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"audio-call-sec\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }\n  }, noError ? /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"justify-content-md-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 8,\n    lg: 9,\n    className: \"p-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"audio-call-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"audio-call-card-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"audio-call-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"audio-call-bg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 23\n    }\n  }), joinState && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"audio-call-action-btn-sec\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"list-unstyled audio-call-action-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(Media, {\n    as: \"li\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"btn-link\",\n    onClick: () => muteAudio(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 31\n    }\n  }, mediaStatus.audio.muted ? /*#__PURE__*/React.createElement(Image, {\n    src: window.location.origin + \"/assets/images/video-call/mic-off.svg\",\n    alt: \"action-icons\",\n    className: \"action-icon-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 35\n    }\n  }) : /*#__PURE__*/React.createElement(Image, {\n    src: window.location.origin + \"/assets/images/video-call/mic.svg\",\n    className: \"action-icon-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 35\n    }\n  }))), /*#__PURE__*/React.createElement(Media, {\n    as: \"li\",\n    className: \"call-animation\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"btn-link\",\n    onClick: () => leaveCall(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: window.location.origin + \"/assets/images/video-call/end-call.svg\",\n    alt: \"action-icons\",\n    className: \"action-icon-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 33\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"back-btn-sec\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: props.singleAudioCall.data.audio_call_request.is_model === 0 ? \"/audio-calls-sent\" : \"/audio-calls-received\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: window.location.origin + \"/assets/images/video-call/back-icon.svg\",\n    alt: \"action-icons\",\n    className: \"back-btn-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 27\n    }\n  }))), props.singleAudioCall.data.audio_call_request.is_model === 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"audio-call-send-tip-sec\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    className: \"audio-call-send-tip-icon\",\n    src: window.location.origin + \"/assets/images/live-streaming/send-tip.svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 27\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: \"send-tip-btn\",\n    onClick: () => setShowTipModal(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 27\n    }\n  }, t(\"send_tips\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"audio-call-connected-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"audio-call-connected-left-sec\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    className: \"audio-call-user-img\",\n    src: props.singleAudioCall.data.audio_call_request.is_model == 1 ? props.singleAudioCall.data.audio_call_request.model_picture : props.singleAudioCall.data.audio_call_request.user_picture,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 27\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 27\n    }\n  }, props.singleAudioCall.data.audio_call_request.is_model == 1 ? props.singleAudioCall.data.audio_call_request.model_displayname : props.singleAudioCall.data.audio_call_request.user_displayname)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"audio-call-connected-center-sec\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"connected-status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 29\n    }\n  }, remoteUsers.length > 0 ? \"Connected\" : \"Connecting\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"audio-call-connected-icon-sec\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    className: \"audio-call-connected-icon\",\n    src: window.location.origin + \"/assets/images/video-call/connected-arrow.svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 29\n    }\n  })), props.singleAudioCall.data.audio_call_request.is_user_needs_to_pay === 1 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"audio-call-amount-spend-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 31\n    }\n  }, t(\"you_spent\"), \" -\", \" \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 33\n    }\n  }, props.singleAudioCall.data.amount_formatted)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"audio-call-connected-right-sec\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    className: \"audio-call-user-img\",\n    src: props.singleAudioCall.data.audio_call_request.is_model == 1 ? props.singleAudioCall.data.audio_call_request.user_picture : props.singleAudioCall.data.audio_call_request.model_picture,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 27\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 27\n    }\n  }, props.singleAudioCall.data.audio_call_request.is_model == 1 ? props.singleAudioCall.data.audio_call_request.user_displayname : props.singleAudioCall.data.audio_call_request.model_displayname), remoteUsers.length > 0 && remoteUsers.map(user => /*#__PURE__*/React.createElement(AgoraMediaPlayer, {\n    audioTrack: user.audioTrack,\n    useClassname: \"d-none\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 31\n    }\n  })))))))), /*#__PURE__*/React.createElement(Col, {\n    md: 4,\n    lg: 3,\n    className: \"p-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"audio-call-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 17\n    }\n  }, !props.audioCallChatMessage.loading && /*#__PURE__*/React.createElement(NewVideoAudioCallChatIndex, {\n    handleChatSubmit: handleChatSubmit,\n    inputMessage: inputMessage,\n    setInputMessage: setInputMessage,\n    data: props.audioCallChatMessage.data,\n    audio: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 21\n    }\n  }))))) : null), showTipModal ? /*#__PURE__*/React.createElement(SendTipPaymentModal, {\n    paymentsModal: showTipModal,\n    closepaymentsModal: closeTipModal,\n    user_id: props.singleAudioCall.data.audio_call_request.model_id,\n    type: \"audiocall\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 9\n    }\n  }) : null);\n};\nconst mapStateToPros = state => ({\n  singleAudioCall: state.privateCall.singleAudioCall,\n  audioCallChatMessage: state.privateCall.audioCallChatMessage,\n  joinAudioCall: state.privateCall.joinAudioCall\n});\nfunction mapDispatchToProps(dispatch) {\n  return {\n    dispatch\n  };\n}\nexport default connect(mapStateToPros, mapDispatchToProps)(translate(NewAudioCallIndex));","map":{"version":3,"names":["React","useState","useEffect","Modal","Container","Row","Col","Button","Form","Image","Media","InputGroup","FormControl","Link","useHistory","fetchSingleAudioCallStart","endAudioCallStart","joinAudioCallStart","addAudioCallMessageContent","fetchAudioCallChatMessageStart","AgoraRTC","useAgoraRTC","connect","translate","t","configuration","SendTipModal","SendTipPaymentModal","AgoraMediaPlayer","NewVideoAudioCallChatIndex","io","createNotification","getSuccessNotificationMessage","chatSocket","rtcclient","createClient","mode","codec","NewAudioCallIndex","props","history","localAudioTrack","leaveRtcChannel","joinAudio","joinState","remoteUsers","isStreamEnded","muteAudio","mediaStatus","noError","setNoError","showTipModal","setShowTipModal","inputMessage","setInputMessage","closeTipModal","dispatch","audio_call_request_unique_id","match","params","singleAudioCall","loading","handleJoin","skipRender","setSkipRender","initial","completed","skip","setSkip","joinAudioCall","Object","keys","success","length","window","location","assign","data","audio_call_request","is_model","notificationMessage","get","virtual_id","agora_token","leaveCall","confirm","audio_call_request_id","chatSocketConnect","id","chatSocketUrl","query","emit","commonid","on","newData","content","push","handleChatSubmit","event","preventDefault","chatData","loggedin_user_id","localStorage","getItem","user_id","model_id","message","from_username","from_userpicture","audio_call_unique_id","created","Date","scrollDownChat","audioCallChatMessage","parent","document","querySelector","objDiv","scrollTop","scrollHeight","createElement","Fragment","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","fluid","md","lg","as","onClick","audio","muted","src","origin","alt","to","model_picture","user_picture","model_displayname","user_displayname","is_user_needs_to_pay","amount_formatted","map","user","audioTrack","useClassname","paymentsModal","closepaymentsModal","type","mapStateToPros","state","privateCall","mapDispatchToProps"],"sources":["/home/mts/Vishal/src/components/VideoAudioCall/NewAudioCallIndex.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Modal,\n  Container,\n  Row,\n  Col,\n  Button,\n  Form,\n  Image,\n  Media,\n  InputGroup,\n  FormControl,\n} from \"react-bootstrap\";\nimport \"./VideoAudioCall.css\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport {\n  fetchSingleAudioCallStart,\n  endAudioCallStart,\n  joinAudioCallStart,\n  addAudioCallMessageContent,\n  fetchAudioCallChatMessageStart,\n} from \"../../store/actions/PrivateCallAction\";\nimport AgoraRTC from \"agora-rtc-sdk-ng\";\nimport useAgoraRTC from \"../../hooks/useAgoraRTC\";\nimport { connect } from \"react-redux\";\nimport { translate, t } from \"react-multi-lang\";\nimport configuration from \"react-global-configuration\";\nimport SendTipModal from \"../helper/SendTipModal\";\nimport SendTipPaymentModal from \"../Model/PaymentModal/SendTipPaymentModal\";\nimport AgoraMediaPlayer from \"../helper/AgoraMediaPlayer\";\nimport NewVideoAudioCallChatIndex from \"./NewVideoAudioCallChatIndex\";\nimport io from \"socket.io-client\";\n\nimport { createNotification } from \"react-redux-notify\";\nimport { getSuccessNotificationMessage } from \"../helper/NotificationMessage\";\n\nlet chatSocket;\nconst rtcclient = AgoraRTC.createClient({ mode: \"rtc\", codec: \"vp8\" });\n\nconst NewAudioCallIndex = (props) => {\n  const history = useHistory();\n\n  const {\n    localAudioTrack,\n    leaveRtcChannel,\n    joinAudio,\n    joinState,\n    remoteUsers,\n    isStreamEnded,\n    muteAudio,\n    mediaStatus,\n  } = useAgoraRTC(rtcclient);\n\n  const [noError, setNoError] = useState(false);\n\n  const [showTipModal, setShowTipModal] = useState(false);\n\n  const [inputMessage, setInputMessage] = useState(\"\");\n\n  const closeTipModal = () => {\n    setShowTipModal(false);\n  };\n\n  useEffect(() => {\n    props.dispatch(\n      fetchSingleAudioCallStart({\n        audio_call_request_unique_id:\n          props.match.params.audio_call_request_unique_id,\n      })\n    );\n  }, []);\n\n  useEffect(() => {\n    if (!props.singleAudioCall.loading) {\n      handleJoin();\n    }\n  }, [props.singleAudioCall.loading]);\n  const [skipRender, setSkipRender] = useState({\n    initial: true,\n    completed: false,\n  });\n  const [skip, setSkip] = useState(true);\n  useEffect(() => {\n    if (!skip && !props.joinAudioCall.loading) {\n      if (Object.keys(props.joinAudioCall.success).length > 0) {\n        setNoError(true);\n      } else {\n        window.location.assign(\n          props.singleAudioCall.data.audio_call_request.is_model === 0\n            ? \"/audio-calls-sent\"\n            : \"/audio-calls-received\"\n        );\n      }\n    }\n    setSkip(false);\n  }, [props.joinAudioCall]);\n\n  useEffect(() => {\n    if (\n      !skipRender.initial &&\n      !skipRender.completed &&\n      remoteUsers.length > 0\n    ) {\n      const notificationMessage =\n        getSuccessNotificationMessage(\"caller Joined\");\n      props.dispatch(createNotification(notificationMessage));\n      setSkipRender({ initial: false, completed: true });\n    } else {\n      setSkipRender({ initial: false, completed: false });\n    }\n  }, [remoteUsers]);\n\n  const handleJoin = () => {\n    joinAudio(\n      configuration.get(\"configData.agora_app_id\"),\n      props.singleAudioCall.data.audio_call_request.virtual_id,\n      props.singleAudioCall.data.audio_call_request.agora_token\n        ? props.singleAudioCall.data.audio_call_request.agora_token\n        : null\n    );\n  };\n\n  const leaveCall = () => {\n    if (window.confirm(\"are you sure to leave call?\")) {\n      props.dispatch(\n        endAudioCallStart({\n          audio_call_request_id: props.match.params.audio_call_request_id,\n        })\n      );\n      leaveRtcChannel();\n      window.location.assign(\"/audio-calls-history\");\n    } else {\n    }\n  };\n\n  useEffect(() => {\n    if (isStreamEnded) {\n      props.dispatch(\n        endAudioCallStart({\n          audio_call_request_id: props.match.params.audio_call_request_id,\n        })\n      );\n      window.location.assign(\"/audio-calls-history\");\n    }\n  }, [isStreamEnded]);\n\n  useEffect(() => {\n    if (joinState) {\n      props.dispatch(\n        joinAudioCallStart({\n          audio_call_request_id:\n            props.singleAudioCall.data.audio_call_request.audio_call_request_id,\n        })\n      );\n    }\n  }, [joinState]);\n\n  useEffect(() => {\n    if (!props.singleAudioCall.loading) {\n      props.dispatch(\n        fetchAudioCallChatMessageStart({\n          audio_call_request_id:\n            props.singleAudioCall.data.audio_call_request.audio_call_request_id,\n        })\n      );\n      chatSocketConnect(\n        props.singleAudioCall.data.audio_call_request\n          .audio_call_request_unique_id\n      );\n    }\n  }, [props.singleAudioCall.loading]);\n\n  const chatSocketConnect = (id) => {\n    // check the socket url is configured\n    let chatSocketUrl = configuration.get(\"configData.chat_socket_url\");\n    if (chatSocketUrl && id) {\n      chatSocket = io(chatSocketUrl, {\n        query: `room : audio_call_` + id + ``,\n      });\n\n      chatSocket.emit(\"audio call update sender\", {\n        commonid: `audio_call_` + id + ``,\n      });\n\n      chatSocket.on(\"audio call chat\", (newData) => {\n        let content = [];\n        content.push(newData);\n        props.dispatch(addAudioCallMessageContent(content));\n      });\n    }\n  };\n\n  const handleChatSubmit = (event) => {\n    event.preventDefault();\n\n    if (inputMessage) {\n      let chatData = [\n        {\n          loggedin_user_id: localStorage.getItem(\"userId\"),\n          user_id: localStorage.getItem(\"userId\"),\n          model_id: props.singleAudioCall.data.audio_call_request.model_id,\n          audio_call_request_id:\n            props.singleAudioCall.data.audio_call_request.audio_call_request_id,\n          message: inputMessage,\n          from_username: localStorage.getItem(\"username\"),\n          from_userpicture: localStorage.getItem(\"user_picture\"),\n          audio_call_unique_id:\n            props.singleAudioCall.data.audio_call_request\n              .audio_call_request_unique_id,\n          created: new Date(),\n        },\n      ];\n      chatSocket.emit(\"audio call chat\", chatData[0]);\n      props.dispatch(addAudioCallMessageContent(chatData));\n      setInputMessage(\"\");\n    }\n  };\n\n  useEffect(() => {\n    scrollDownChat();\n  }, [props.audioCallChatMessage.data]);\n\n  const scrollDownChat = () => {\n    const parent = document.querySelector(\"#chat-container\");\n    const objDiv = document.querySelector(\".video-call-chat-room\");\n    if (objDiv != null) {\n      parent.scrollTop = objDiv.scrollHeight;\n    }\n  };\n\n  if (props.singleAudioCall.loading) {\n    return null;\n  }\n\n  return (\n    <>\n      <div className=\"audio-call-sec\">\n        {noError ? (\n          <Container fluid>\n            <Row className=\"justify-content-md-center\">\n              <Col md={8} lg={9} className=\"p-0\">\n                <div className=\"audio-call-box\">\n                  <div className=\"audio-call-card-center\">\n                    <div className=\"audio-call-card\">\n                      {/* <Image\n                                            src={\n                                                window.location.origin + \"/assets/images/video-call/live-bg.png\"\n                                            }\n                                            className=\"audio-call-bg-img\"\n                                        /> */}\n                      <div className=\"audio-call-bg\"></div>\n                      {joinState && (\n                        <div className=\"audio-call-action-btn-sec\">\n                          <ul className=\"list-unstyled audio-call-action-btn\">\n                            <Media as=\"li\">\n                              <Button\n                                className=\"btn-link\"\n                                onClick={() => muteAudio()}\n                              >\n                                {mediaStatus.audio.muted ? (\n                                  <Image\n                                    src={\n                                      window.location.origin +\n                                      \"/assets/images/video-call/mic-off.svg\"\n                                    }\n                                    alt=\"action-icons\"\n                                    className=\"action-icon-img\"\n                                  />\n                                ) : (\n                                  <Image\n                                    src={\n                                      window.location.origin +\n                                      \"/assets/images/video-call/mic.svg\"\n                                    }\n                                    className=\"action-icon-img\"\n                                  />\n                                )}\n                              </Button>\n                            </Media>\n                            <Media as=\"li\" className=\"call-animation\">\n                              <Button\n                                className=\"btn-link\"\n                                onClick={() => leaveCall()}\n                              >\n                                <Image\n                                  src={\n                                    window.location.origin +\n                                    \"/assets/images/video-call/end-call.svg\"\n                                  }\n                                  alt=\"action-icons\"\n                                  className=\"action-icon-img\"\n                                />\n                              </Button>\n                            </Media>\n                          </ul>\n                        </div>\n                      )}\n\n                      <div className=\"back-btn-sec\">\n                        <Link\n                          to={\n                            props.singleAudioCall.data.audio_call_request\n                              .is_model === 0\n                              ? \"/audio-calls-sent\"\n                              : \"/audio-calls-received\"\n                          }\n                        >\n                          <Image\n                            src={\n                              window.location.origin +\n                              \"/assets/images/video-call/back-icon.svg\"\n                            }\n                            alt=\"action-icons\"\n                            className=\"back-btn-img\"\n                          />\n                        </Link>\n                      </div>\n                      {props.singleAudioCall.data.audio_call_request\n                        .is_model === 0 && (\n                        <div className=\"audio-call-send-tip-sec\">\n                          <Image\n                            className=\"audio-call-send-tip-icon\"\n                            src={\n                              window.location.origin +\n                              \"/assets/images/live-streaming/send-tip.svg\"\n                            }\n                          />\n                          <Button\n                            className=\"send-tip-btn\"\n                            onClick={() => setShowTipModal(true)}\n                          >\n                            {t(\"send_tips\")}\n                          </Button>\n                        </div>\n                      )}\n\n                      <div className=\"audio-call-connected-box\">\n                        <div className=\"audio-call-connected-left-sec\">\n                          <Image\n                            className=\"audio-call-user-img\"\n                            src={\n                              props.singleAudioCall.data.audio_call_request\n                                .is_model == 1\n                                ? props.singleAudioCall.data.audio_call_request\n                                    .model_picture\n                                : props.singleAudioCall.data.audio_call_request\n                                    .user_picture\n                            }\n                          />\n                          <h4>\n                            {props.singleAudioCall.data.audio_call_request\n                              .is_model == 1\n                              ? props.singleAudioCall.data.audio_call_request\n                                  .model_displayname\n                              : props.singleAudioCall.data.audio_call_request\n                                  .user_displayname}\n                          </h4>\n                          {/* {joinState && (\n                          <AgoraMediaPlayer\n                            audioTrack={localAudioTrack}\n                            useClassname=\"d-none\"\n                          ></AgoraMediaPlayer>\n                        )} */}\n                        </div>\n                        <div className=\"audio-call-connected-center-sec\">\n                          <div className=\"connected-status\">\n                            <p>\n                              {remoteUsers.length > 0\n                                ? \"Connected\"\n                                : \"Connecting\"}\n                            </p>\n                          </div>\n                          <div className=\"audio-call-connected-icon-sec\">\n                            <Image\n                              className=\"audio-call-connected-icon\"\n                              src={\n                                window.location.origin +\n                                \"/assets/images/video-call/connected-arrow.svg\"\n                              }\n                            />\n                          </div>\n                          {props.singleAudioCall.data.audio_call_request\n                            .is_user_needs_to_pay === 1 && (\n                            <div className=\"audio-call-amount-spend-details\">\n                              <h4>\n                                {t(\"you_spent\")} -{\" \"}\n                                <span className=\"text-primary\">\n                                  {props.singleAudioCall.data.amount_formatted}\n                                </span>\n                              </h4>\n                            </div>\n                          )}\n                        </div>\n                        <div className=\"audio-call-connected-right-sec\">\n                          <Image\n                            className=\"audio-call-user-img\"\n                            src={\n                              props.singleAudioCall.data.audio_call_request\n                                .is_model == 1\n                                ? props.singleAudioCall.data.audio_call_request\n                                    .user_picture\n                                : props.singleAudioCall.data.audio_call_request\n                                    .model_picture\n                            }\n                          />\n                          <h4>\n                            {props.singleAudioCall.data.audio_call_request\n                              .is_model == 1\n                              ? props.singleAudioCall.data.audio_call_request\n                                  .user_displayname\n                              : props.singleAudioCall.data.audio_call_request\n                                  .model_displayname}\n                          </h4>\n                          {remoteUsers.length > 0 &&\n                            remoteUsers.map((user) => (\n                              <AgoraMediaPlayer\n                                audioTrack={user.audioTrack}\n                                useClassname={\"d-none\"}\n                              ></AgoraMediaPlayer>\n                            ))}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </Col>\n              <Col md={4} lg={3} className=\"p-0\">\n                <div className=\"audio-call-card\">\n                  {!props.audioCallChatMessage.loading && (\n                    <NewVideoAudioCallChatIndex\n                      handleChatSubmit={handleChatSubmit}\n                      inputMessage={inputMessage}\n                      setInputMessage={setInputMessage}\n                      data={props.audioCallChatMessage.data}\n                      audio\n                    />\n                  )}\n                </div>\n              </Col>\n            </Row>\n          </Container>\n        ) : null}\n      </div>\n      {showTipModal ? (\n        <SendTipPaymentModal\n          paymentsModal={showTipModal}\n          closepaymentsModal={closeTipModal}\n          user_id={props.singleAudioCall.data.audio_call_request.model_id}\n          type=\"audiocall\"\n        />\n      ) : null}\n    </>\n  );\n};\n\nconst mapStateToPros = (state) => ({\n  singleAudioCall: state.privateCall.singleAudioCall,\n  audioCallChatMessage: state.privateCall.audioCallChatMessage,\n  joinAudioCall: state.privateCall.joinAudioCall,\n});\n\nfunction mapDispatchToProps(dispatch) {\n  return { dispatch };\n}\n\nexport default connect(\n  mapStateToPros,\n  mapDispatchToProps\n)(translate(NewAudioCallIndex));\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}