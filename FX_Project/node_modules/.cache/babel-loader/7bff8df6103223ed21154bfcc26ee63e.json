{"ast":null,"code":"var _jsxFileName = \"/home/mts/Vishal/src/components/helper/PaymentAddCardModal.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Form, Modal, InputGroup, FormControl, Col, Row, Button } from \"react-bootstrap\";\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\nimport api from \"../../Environment\";\nimport { connect } from \"react-redux\";\nimport { createNotification } from \"react-redux-notify\";\nimport { getErrorNotificationMessage, getSuccessNotificationMessage } from \"./NotificationMessage\";\nimport { fetchCardDetailsStart } from \"../../store/actions/CardsAction\";\nimport { translate, t } from \"react-multi-lang\";\nconst PaymentAddCardModal = props => {\n  const stripe = useStripe();\n  const elements = useElements();\n  const [addCardButtonDisable, setAddCardButtonDisable] = useState(false);\n  const [addCardLoadingContent, setAddCardLoadingContent] = useState(null);\n  const addCard = async ev => {\n    ev.preventDefault();\n    setAddCardButtonDisable(true);\n    setAddCardLoadingContent(t(\"loading_please_wait\"));\n    if (stripe) {\n      await stripe.createPaymentMethod({\n        type: \"card\",\n        card: elements.getElement(CardElement)\n      }).then(payload => {\n        // console.log(\"Payload\", payload);\n        const inputData = {\n          card_token: payload.paymentMethod.id\n        };\n        api.postMethod(\"cards_add\", inputData).then(response => {\n          if (response.data.success) {\n            const notificationMessage = getSuccessNotificationMessage(response.data.message);\n            props.dispatch(createNotification(notificationMessage));\n            props.dispatch(fetchCardDetailsStart());\n            setAddCardButtonDisable(false);\n            setAddCardLoadingContent(null);\n          } else {\n            const notificationMessage = getErrorNotificationMessage(response.data.error);\n            props.dispatch(createNotification(notificationMessage));\n          }\n          props.closePaymentAddCardModal();\n        }).catch(error => {\n          console.log(\"Error\", error);\n          setAddCardButtonDisable(false);\n          setAddCardLoadingContent(null);\n          const notificationMessage = getErrorNotificationMessage(t(\"error_please_try_again\"));\n          props.dispatch(createNotification(notificationMessage));\n        });\n      }).catch(error => {\n        console.log(\"Eroor\", error);\n        setAddCardButtonDisable(false);\n        setAddCardLoadingContent(null);\n        const notificationMessage = getErrorNotificationMessage(t(\"please_check_your_card_details_and_try_again\"));\n        props.dispatch(createNotification(notificationMessage));\n      });\n    } else {\n      setAddCardButtonDisable(false);\n      setAddCardLoadingContent(null);\n      const notificationMessage = getErrorNotificationMessage(t(\"stripe_is_not_configured\"));\n      props.dispatch(createNotification(notificationMessage));\n    }\n  };\n  const nullData = [\"\", null, undefined, \"light\"];\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Modal, {\n    className: `modal-dialog-center payment-add-card-modal \n                ${nullData.includes(localStorage.getItem(\"theme\")) ? \"\" : \"dark-theme-modal\"}`,\n    size: \"md\",\n    centered: true,\n    show: props.paymentAddCard,\n    onHide: props.closePaymentAddCardModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, props.paymentAddCard === true ? /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  }, t(\"add_card\"))), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    sm: 12,\n    md: 7,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CardElement, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 19\n    }\n  })))), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    className: \"btn btn-danger width-btn\",\n    \"data-dismiss\": \"modal\",\n    onClick: props.closePaymentAddCardModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }, t(\"cancel\")), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    className: \"btn btn-success width-btn\",\n    \"data-dismiss\": \"modal\",\n    onClick: addCard,\n    disabled: addCardButtonDisable,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }, addCardLoadingContent != null ? addCardLoadingContent : t(\"add\")))) : null));\n};\nfunction mapDispatchToProps(dispatch) {\n  return {\n    dispatch\n  };\n}\nexport default connect(null, mapDispatchToProps)(translate(PaymentAddCardModal));","map":{"version":3,"names":["React","useState","useEffect","Link","Form","Modal","InputGroup","FormControl","Col","Row","Button","CardElement","useStripe","useElements","api","connect","createNotification","getErrorNotificationMessage","getSuccessNotificationMessage","fetchCardDetailsStart","translate","t","PaymentAddCardModal","props","stripe","elements","addCardButtonDisable","setAddCardButtonDisable","addCardLoadingContent","setAddCardLoadingContent","addCard","ev","preventDefault","createPaymentMethod","type","card","getElement","then","payload","inputData","card_token","paymentMethod","id","postMethod","response","data","success","notificationMessage","message","dispatch","error","closePaymentAddCardModal","catch","console","log","nullData","undefined","createElement","Fragment","className","includes","localStorage","getItem","size","centered","show","paymentAddCard","onHide","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Header","closeButton","Title","Body","sm","md","Footer","onClick","disabled","mapDispatchToProps"],"sources":["/home/mts/Vishal/src/components/helper/PaymentAddCardModal.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n  Form,\n  Modal,\n  InputGroup,\n  FormControl,\n  Col,\n  Row,\n  Button,\n} from \"react-bootstrap\";\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\nimport api from \"../../Environment\";\nimport { connect } from \"react-redux\";\nimport { createNotification } from \"react-redux-notify\";\nimport {\n  getErrorNotificationMessage,\n  getSuccessNotificationMessage,\n} from \"./NotificationMessage\";\nimport { fetchCardDetailsStart } from \"../../store/actions/CardsAction\";\nimport { translate, t } from \"react-multi-lang\";\n\nconst PaymentAddCardModal = (props) => {\n  const stripe = useStripe();\n  const elements = useElements();\n  const [addCardButtonDisable, setAddCardButtonDisable] = useState(false);\n  const [addCardLoadingContent, setAddCardLoadingContent] = useState(null);\n\n  const addCard = async (ev) => {\n    ev.preventDefault();\n    setAddCardButtonDisable(true);\n    setAddCardLoadingContent(t(\"loading_please_wait\"));\n    if (stripe) {\n      await stripe\n        .createPaymentMethod({\n          type: \"card\",\n          card: elements.getElement(CardElement),\n        })\n        .then((payload) => {\n          // console.log(\"Payload\", payload);\n          const inputData = {\n            card_token: payload.paymentMethod.id,\n          };\n          api\n            .postMethod(\"cards_add\", inputData)\n            .then((response) => {\n              if (response.data.success) {\n                const notificationMessage = getSuccessNotificationMessage(\n                  response.data.message\n                );\n                props.dispatch(createNotification(notificationMessage));\n                props.dispatch(fetchCardDetailsStart());\n\n                setAddCardButtonDisable(false);\n                setAddCardLoadingContent(null);\n              } else {\n                const notificationMessage = getErrorNotificationMessage(\n                  response.data.error\n                );\n                props.dispatch(createNotification(notificationMessage));\n              }\n              props.closePaymentAddCardModal();\n            })\n            .catch((error) => {\n              console.log(\"Error\", error);\n              setAddCardButtonDisable(false);\n              setAddCardLoadingContent(null);\n              const notificationMessage = getErrorNotificationMessage(\n                t(\"error_please_try_again\")\n              );\n              props.dispatch(createNotification(notificationMessage));\n            });\n        })\n        .catch((error) => {\n          console.log(\"Eroor\", error);\n          setAddCardButtonDisable(false);\n          setAddCardLoadingContent(null);\n          const notificationMessage = getErrorNotificationMessage(\n            t(\"please_check_your_card_details_and_try_again\")\n          );\n          props.dispatch(createNotification(notificationMessage));\n        });\n    } else {\n      setAddCardButtonDisable(false);\n      setAddCardLoadingContent(null);\n      const notificationMessage = getErrorNotificationMessage(\n   t(\"stripe_is_not_configured\")\n      );\n      props.dispatch(createNotification(notificationMessage));\n    }\n  };\n\n  const nullData = [\"\", null, undefined, \"light\"];\n\n  return (\n    <>\n      <Modal\n        className={`modal-dialog-center payment-add-card-modal \n                ${nullData.includes(localStorage.getItem(\"theme\")) ?\n            \"\" : \"dark-theme-modal\"\n          }`}\n        size=\"md\"\n        centered\n        show={props.paymentAddCard}\n        onHide={props.closePaymentAddCardModal}\n      >\n        {props.paymentAddCard === true ?\n          <Form>\n            <Modal.Header closeButton>\n              <Modal.Title>{t(\"add_card\")}</Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n              <Row>\n                <Col sm={12} md={7}>\n                  <CardElement />\n                </Col>\n              </Row>\n            </Modal.Body>\n            <Modal.Footer>\n              <Button\n                type=\"button\"\n                className=\"btn btn-danger width-btn\"\n                data-dismiss=\"modal\"\n                onClick={props.closePaymentAddCardModal}\n              >\n                {t(\"cancel\")}\n              </Button>\n              <Button\n                type=\"submit\"\n                className=\"btn btn-success width-btn\"\n                data-dismiss=\"modal\"\n                onClick={addCard}\n                disabled={addCardButtonDisable}\n              >\n                {addCardLoadingContent != null ? addCardLoadingContent : t(\"add\")}\n              </Button>\n            </Modal.Footer>\n          </Form>\n          : null}\n      </Modal>\n    </>\n  );\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return { dispatch };\n}\n\nexport default connect(null, mapDispatchToProps)(translate(PaymentAddCardModal));\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}