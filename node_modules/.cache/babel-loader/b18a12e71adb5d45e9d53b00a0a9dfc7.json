{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = StepZilla;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _promise = _interopRequireDefault(require(\"promise\"));\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n    newObj.default = obj;\n    return newObj;\n  }\n}\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n  return _arr;\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction StepZilla(props) {\n  var _useState = (0, _react.useState)(props.startAtStep),\n    _useState2 = _slicedToArray(_useState, 2),\n    compState = _useState2[0],\n    setCompState = _useState2[1];\n  var _useState3 = (0, _react.useState)(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    navState = _useState4[0],\n    setNavState = _useState4[1];\n  var hidden = {\n    display: 'none'\n  };\n  (0, _react.useEffect)(function () {\n    setNavState(getNavStates(props.startAtStep, props.steps.length));\n  }, []); // update the header nav states via classes so they can be styled via css\n\n  var getNavStates = function getNavStates(indx, length) {\n    var styles = [];\n    for (var i = 0; i < length; i++) {\n      if (i < indx || !props.prevBtnOnLastStep && indx === length - 1) {\n        styles.push('done');\n      } else if (i === indx) {\n        styles.push('doing');\n      } else {\n        styles.push('todo');\n      }\n    }\n    return {\n      styles: styles\n    };\n  };\n  var getPrevNextBtnLayout = function getPrevNextBtnLayout(currentStep) {\n    // first set default values\n    var showPreviousBtn = true;\n    var showNextBtn = true;\n    var nextStepText = props.nextButtonText; // first step hide previous btn\n\n    if (currentStep === 0) {\n      showPreviousBtn = false;\n    } // second to last step change next btn text if supplied as props\n\n    if (currentStep === props.steps.length - 2) {\n      // if user did not give a custom nextTextOnFinalActionStep, the nextButtonText becomes the default\n      var nextTextOnFinalActionStep = props.nextTextOnFinalActionStep ? props.nextTextOnFinalActionStep : props.nextButtonText;\n      nextStepText = nextTextOnFinalActionStep || nextStepText;\n    } // last step hide next btn, hide previous btn if supplied as props\n\n    if (currentStep >= props.steps.length - 1) {\n      showNextBtn = false;\n      showPreviousBtn = props.prevBtnOnLastStep === false ? false : true;\n    }\n    return {\n      showPreviousBtn: showPreviousBtn,\n      showNextBtn: showNextBtn,\n      nextStepText: nextStepText\n    };\n  }; // which step are we in?\n\n  var checkNavState = function checkNavState(nextStep) {\n    if (props.onStepChange) {\n      props.onStepChange(nextStep);\n    }\n  }; // set the nav state\n\n  var adjustNavState = function adjustNavState(next) {\n    setNavState(getNavStates(next, props.steps.length));\n    if (next < props.steps.length) {\n      setCompState(next);\n    }\n    checkNavState(next);\n  }; // handles keydown on enter being pressed in any Child component input area. in this case it goes to the next (ignore textareas as they should allow line breaks)\n\n  var handleKeyDown = function handleKeyDown(evt) {\n    if (evt.which === 13) {\n      if (!props.preventEnterSubmission && evt.target.type !== 'textarea') {\n        next();\n      } else if (evt.target.type !== 'textarea') {\n        evt.preventDefault();\n      }\n    }\n  }; // this utility method lets Child components invoke a direct jump to another step\n\n  var _jumpToStep = function jumpToStep(evt) {\n    if (typeof evt.target === 'undefined') {\n      // a child step wants to invoke a jump between steps. in this case 'evt' is the numeric step number and not the JS event\n      adjustNavState(evt);\n    } else {\n      // the main navigation step ui is invoking a jump between steps\n      // if stepsNavigation is turned off or user clicked on existing step again (on step 2 and clicked on 2 again) then ignore\n      if (!props.stepsNavigation || evt.target.value === compState) {\n        evt.preventDefault();\n        evt.stopPropagation();\n        return;\n      } // evt is a react event so we need to persist it as we deal with aync promises which nullifies these events (https://facebook.github.io/react/docs/events.html#event-pooling)\n\n      evt.persist();\n      var movingBack = evt.target.value < compState; // are we trying to move back or front?\n\n      var passThroughStepsNotValid = false; // if we are jumping forward, only allow that if inbetween steps are all validated. This flag informs the logic...\n\n      var proceed = false; // flag on if we should move on\n\n      abstractStepMoveAllowedToPromise(movingBack).then(function (valid) {\n        // validation was a success (promise or sync validation). In it was a Promise's resolve()\n        // ... then proceed will be undefined, so make it true. Or else 'proceed' will carry the true/false value from sync\n        proceed = typeof valid === 'undefined' ? true : valid;\n        if (!movingBack) {\n          updateStepValidationFlag(proceed);\n        }\n        if (proceed) {\n          if (!movingBack) {\n            // looks like we are moving forward, 'reduce' a new array of step>validated values we need to check and\n            // ... 'some' that to get a decision on if we should allow moving forward\n            passThroughStepsNotValid = props.steps.reduce(function (a, c, i) {\n              if (i >= compState && i < evt.target.value) {\n                a.push(c.validated);\n              }\n              return a;\n            }, []).some(function (c) {\n              return c === false;\n            });\n          }\n        }\n      }).catch(function () {\n        // Promise based validation was a fail (i.e reject())\n        if (!movingBack) {\n          updateStepValidationFlag(false);\n        }\n      }).then(function () {\n        // this is like finally(), executes if error no no error\n        if (proceed && !passThroughStepsNotValid) {\n          if (evt.target.value === props.steps.length - 1 && compState === props.steps.length - 1) {\n            adjustNavState(props.steps.length);\n          } else {\n            adjustNavState(evt.target.value);\n          }\n        }\n      }).catch(function (e) {\n        if (e) {\n          // see note below called \"CatchRethrowing\"\n          // ... plus the finally then() above is what throws the JS Error so we need to catch that here specifically\n          setTimeout(function () {\n            throw e;\n          });\n        }\n      });\n    }\n  }; // move next via next button\n\n  var next = function next() {\n    abstractStepMoveAllowedToPromise().then(function () {\n      var proceed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      // validation was a success (promise or sync validation). In it was a Promise's resolve() then proceed will be undefined,\n      // ... so make it true. Or else 'proceed' will carry the true/false value from sync validation\n      updateStepValidationFlag(proceed);\n      if (proceed) {\n        adjustNavState(compState + 1);\n      }\n    }).catch(function (e) {\n      if (e) {\n        // CatchRethrowing: as we wrap StepMoveAllowed() to resolve as a Promise, the then() is invoked and the next React Component is loaded.\n        // ... during the render, if there are JS errors thrown (e.g. ReferenceError) it gets swallowed by the Promise library and comes in here (catch)\n        // ... so we need to rethrow it outside the execution stack so it behaves like a notmal JS error (i.e. halts and prints to console)\n        //\n        setTimeout(function () {\n          throw e;\n        });\n      } // Promise based validation was a fail (i.e reject())\n\n      updateStepValidationFlag(false);\n    });\n  }; // move behind via previous button\n\n  var previous = function previous() {\n    if (compState > 0) {\n      adjustNavState(compState - 1);\n    }\n  }; // update step's validation flag\n\n  var updateStepValidationFlag = function updateStepValidationFlag() {\n    var val = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    props.steps[compState].validated = val; // note: if a step component returns 'underfined' then treat as \"true\".\n  };\n  var activeComponentRef = (0, _react.useRef)(null); // are we allowed to move forward? via the next button or via jumpToStep?\n\n  var stepMoveAllowed = function stepMoveAllowed() {\n    var skipValidationExecution = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    var proceed = false;\n    if (props.dontValidate) {\n      proceed = true;\n    } else {\n      if (skipValidationExecution) {\n        // we are moving backwards in steps, in this case dont validate as it means the user is not commiting to \"save\"\n        proceed = true;\n      } else if (isStepAtIndexHOCValidationBased(compState)) {\n        // the user is using a higer order component (HOC) for validation (e.g react-validation-mixin), this wraps the StepZilla steps as a HOC,\n        // so use hocValidationAppliedTo to determine if this step needs the aync validation as per react-validation-mixin interface\n        proceed = activeComponentRef.current.refs.component.isValidated();\n      } else if (activeComponentRef.current === null || typeof activeComponentRef.current.isValidated === 'undefined') {\n        // if its a form component, it should have implemeted a public isValidated class (also pure componenets wont even have refs - i.e. a empty object). If not then continue\n        proceed = true;\n      } else {\n        // user is moving forward in steps, invoke validation as its available\n        proceed = activeComponentRef.current.isValidated();\n      }\n    }\n    return proceed;\n  };\n  var isStepAtIndexHOCValidationBased = function isStepAtIndexHOCValidationBased(stepIndex) {\n    return props.hocValidationAppliedTo && props.hocValidationAppliedTo.length > 0 && props.hocValidationAppliedTo.indexOf(stepIndex) > -1;\n  }; // a validation method is each step can be sync or async (Promise based), this utility abstracts the wrapper stepMoveAllowed to be Promise driven regardless of validation return type\n\n  var abstractStepMoveAllowedToPromise = function abstractStepMoveAllowedToPromise(movingBack) {\n    return _promise.default.resolve(stepMoveAllowed(movingBack));\n  }; // get the classmame of steps\n\n  var getClassName = function getClassName(className, i) {\n    var liClassName = '';\n    if (navState && navState.styles) {\n      liClassName = \"\".concat(className, \"-\").concat(navState.styles[i]); // if step ui based navigation is disabled, then dont highlight step\n\n      if (!props.stepsNavigation) {\n        liClassName += ' no-hl';\n      }\n    }\n    return liClassName;\n  }; // render the steps as stepsNavigation\n\n  var renderSteps = function renderSteps() {\n    return props.steps.map(function (s, i) {\n      return _react.default.createElement(\"li\", {\n        className: getClassName('progtrckr', i),\n        onClick: function onClick(evt) {\n          _jumpToStep(evt);\n        },\n        key: i,\n        value: i\n      }, _react.default.createElement(\"em\", null, i + 1), _react.default.createElement(\"span\", null, props.steps[i].name));\n    });\n  };\n  var _getPrevNextBtnLayout = getPrevNextBtnLayout(compState),\n    nextStepText = _getPrevNextBtnLayout.nextStepText,\n    showNextBtn = _getPrevNextBtnLayout.showNextBtn,\n    showPreviousBtn = _getPrevNextBtnLayout.showPreviousBtn; // clone the step component dynamically and tag it as activeComponent so we can validate it on next. also bind the jumpToStep piping method\n\n  var cloneExtensions = {\n    jumpToStep: function jumpToStep(t) {\n      _jumpToStep(t);\n    }\n  };\n  var componentPointer = null;\n  var compToRender = null;\n  if (props.steps[compState]) {\n    componentPointer = props.steps[compState].component; // S: ref binding -----\n    // we need to bind a ref to it so we can use the imperitive \"isValidated\" method when needed to prevent navigation\n    // ... we only can do this if its a (1) React Class based component or (2) A Hooks based stateful component wrapped in forwardRef\n    // (1) can only update refs if its a regular React component (not a pure component - i.e. function components with no state), so lets check that\n\n    if (componentPointer instanceof _react.Component || componentPointer.type && componentPointer.type.prototype instanceof _react.Component) {\n      // unit test deteceted that instanceof Component can be in either of these locations so test both (not sure why this is the case)\n      cloneExtensions.ref = activeComponentRef;\n    } else {\n      // (2) after react hooks was released, functional components can have state and therefore support refs\n      // ... we do this via forwardRefs. So we need to support this as well\n      // ... after testing, if both the below types are objects then it's a hooks function component wrapped in forwardRef\n      if (_typeof(componentPointer) === 'object' && _typeof(componentPointer.type) === 'object') {\n        cloneExtensions.ref = activeComponentRef;\n      }\n    } // E: ref binding -----\n\n    compToRender = _react.default.cloneElement(componentPointer, cloneExtensions);\n  } // main render of stepzilla container\n\n  return _react.default.createElement(\"div\", {\n    className: \"multi-step\",\n    onKeyDown: function onKeyDown(evt) {\n      handleKeyDown(evt);\n    }\n  }, props.showSteps ? _react.default.createElement(\"ol\", {\n    className: \"progtrckr\"\n  }, renderSteps()) : _react.default.createElement(\"span\", null), compToRender, _react.default.createElement(\"div\", {\n    style: props.showNavigation ? {} : hidden,\n    className: \"footer-buttons\"\n  }, _react.default.createElement(\"button\", {\n    type: \"button\",\n    style: showPreviousBtn ? {} : hidden,\n    className: props.backButtonCls,\n    onClick: function onClick() {\n      previous();\n    },\n    id: \"prev-button\"\n  }, props.backButtonText), _react.default.createElement(\"button\", {\n    type: \"button\",\n    style: showNextBtn ? {} : hidden,\n    className: props.nextButtonCls,\n    onClick: function onClick() {\n      next();\n    },\n    id: \"next-button\"\n  }, nextStepText)));\n}\nStepZilla.defaultProps = {\n  showSteps: true,\n  showNavigation: true,\n  stepsNavigation: true,\n  prevBtnOnLastStep: true,\n  dontValidate: false,\n  preventEnterSubmission: false,\n  startAtStep: 0,\n  nextButtonText: 'Next',\n  nextButtonCls: 'btn btn-prev btn-primary btn-lg pull-right',\n  backButtonText: 'Previous',\n  backButtonCls: 'btn btn-next btn-primary btn-lg pull-left',\n  hocValidationAppliedTo: []\n};\nStepZilla.propTypes = {\n  steps: _propTypes.default.arrayOf(_propTypes.default.shape({\n    name: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.object]).isRequired,\n    component: _propTypes.default.element.isRequired\n  })).isRequired,\n  showSteps: _propTypes.default.bool,\n  showNavigation: _propTypes.default.bool,\n  stepsNavigation: _propTypes.default.bool,\n  prevBtnOnLastStep: _propTypes.default.bool,\n  dontValidate: _propTypes.default.bool,\n  preventEnterSubmission: _propTypes.default.bool,\n  startAtStep: _propTypes.default.number,\n  nextButtonText: _propTypes.default.string,\n  nextButtonCls: _propTypes.default.string,\n  backButtonCls: _propTypes.default.string,\n  backButtonText: _propTypes.default.string,\n  hocValidationAppliedTo: _propTypes.default.array,\n  onStepChange: _propTypes.default.func\n};","map":{"version":3,"names":["Object","defineProperty","exports","value","default","StepZilla","_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_promise","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","desc","getOwnPropertyDescriptor","get","set","_typeof","Symbol","iterator","constructor","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","TypeError","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","length","err","Array","isArray","props","_useState","useState","startAtStep","_useState2","compState","setCompState","_useState3","_useState4","navState","setNavState","hidden","display","useEffect","getNavStates","steps","indx","styles","prevBtnOnLastStep","getPrevNextBtnLayout","currentStep","showPreviousBtn","showNextBtn","nextStepText","nextButtonText","nextTextOnFinalActionStep","checkNavState","nextStep","onStepChange","adjustNavState","handleKeyDown","evt","which","preventEnterSubmission","target","type","preventDefault","_jumpToStep","jumpToStep","stepsNavigation","stopPropagation","persist","movingBack","passThroughStepsNotValid","proceed","abstractStepMoveAllowedToPromise","then","valid","updateStepValidationFlag","reduce","a","c","validated","some","catch","e","setTimeout","arguments","previous","val","activeComponentRef","useRef","stepMoveAllowed","skipValidationExecution","dontValidate","isStepAtIndexHOCValidationBased","current","refs","component","isValidated","stepIndex","hocValidationAppliedTo","indexOf","resolve","getClassName","className","liClassName","concat","renderSteps","map","s","createElement","onClick","name","_getPrevNextBtnLayout","cloneExtensions","t","componentPointer","compToRender","Component","ref","cloneElement","onKeyDown","showSteps","style","showNavigation","backButtonCls","id","backButtonText","nextButtonCls","defaultProps","propTypes","arrayOf","shape","oneOfType","string","object","isRequired","element","bool","number","array","func"],"sources":["/home/mts/FX-Project/node_modules/react-stepzilla/dist/main.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = StepZilla;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _promise = _interopRequireDefault(require(\"promise\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction StepZilla(props) {\n  var _useState = (0, _react.useState)(props.startAtStep),\n      _useState2 = _slicedToArray(_useState, 2),\n      compState = _useState2[0],\n      setCompState = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      navState = _useState4[0],\n      setNavState = _useState4[1];\n\n  var hidden = {\n    display: 'none'\n  };\n  (0, _react.useEffect)(function () {\n    setNavState(getNavStates(props.startAtStep, props.steps.length));\n  }, []); // update the header nav states via classes so they can be styled via css\n\n  var getNavStates = function getNavStates(indx, length) {\n    var styles = [];\n\n    for (var i = 0; i < length; i++) {\n      if (i < indx || !props.prevBtnOnLastStep && indx === length - 1) {\n        styles.push('done');\n      } else if (i === indx) {\n        styles.push('doing');\n      } else {\n        styles.push('todo');\n      }\n    }\n\n    return {\n      styles: styles\n    };\n  };\n\n  var getPrevNextBtnLayout = function getPrevNextBtnLayout(currentStep) {\n    // first set default values\n    var showPreviousBtn = true;\n    var showNextBtn = true;\n    var nextStepText = props.nextButtonText; // first step hide previous btn\n\n    if (currentStep === 0) {\n      showPreviousBtn = false;\n    } // second to last step change next btn text if supplied as props\n\n\n    if (currentStep === props.steps.length - 2) {\n      // if user did not give a custom nextTextOnFinalActionStep, the nextButtonText becomes the default\n      var nextTextOnFinalActionStep = props.nextTextOnFinalActionStep ? props.nextTextOnFinalActionStep : props.nextButtonText;\n      nextStepText = nextTextOnFinalActionStep || nextStepText;\n    } // last step hide next btn, hide previous btn if supplied as props\n\n\n    if (currentStep >= props.steps.length - 1) {\n      showNextBtn = false;\n      showPreviousBtn = props.prevBtnOnLastStep === false ? false : true;\n    }\n\n    return {\n      showPreviousBtn: showPreviousBtn,\n      showNextBtn: showNextBtn,\n      nextStepText: nextStepText\n    };\n  }; // which step are we in?\n\n\n  var checkNavState = function checkNavState(nextStep) {\n    if (props.onStepChange) {\n      props.onStepChange(nextStep);\n    }\n  }; // set the nav state\n\n\n  var adjustNavState = function adjustNavState(next) {\n    setNavState(getNavStates(next, props.steps.length));\n\n    if (next < props.steps.length) {\n      setCompState(next);\n    }\n\n    checkNavState(next);\n  }; // handles keydown on enter being pressed in any Child component input area. in this case it goes to the next (ignore textareas as they should allow line breaks)\n\n\n  var handleKeyDown = function handleKeyDown(evt) {\n    if (evt.which === 13) {\n      if (!props.preventEnterSubmission && evt.target.type !== 'textarea') {\n        next();\n      } else if (evt.target.type !== 'textarea') {\n        evt.preventDefault();\n      }\n    }\n  }; // this utility method lets Child components invoke a direct jump to another step\n\n\n  var _jumpToStep = function jumpToStep(evt) {\n    if (typeof evt.target === 'undefined') {\n      // a child step wants to invoke a jump between steps. in this case 'evt' is the numeric step number and not the JS event\n      adjustNavState(evt);\n    } else {\n      // the main navigation step ui is invoking a jump between steps\n      // if stepsNavigation is turned off or user clicked on existing step again (on step 2 and clicked on 2 again) then ignore\n      if (!props.stepsNavigation || evt.target.value === compState) {\n        evt.preventDefault();\n        evt.stopPropagation();\n        return;\n      } // evt is a react event so we need to persist it as we deal with aync promises which nullifies these events (https://facebook.github.io/react/docs/events.html#event-pooling)\n\n\n      evt.persist();\n      var movingBack = evt.target.value < compState; // are we trying to move back or front?\n\n      var passThroughStepsNotValid = false; // if we are jumping forward, only allow that if inbetween steps are all validated. This flag informs the logic...\n\n      var proceed = false; // flag on if we should move on\n\n      abstractStepMoveAllowedToPromise(movingBack).then(function (valid) {\n        // validation was a success (promise or sync validation). In it was a Promise's resolve()\n        // ... then proceed will be undefined, so make it true. Or else 'proceed' will carry the true/false value from sync\n        proceed = typeof valid === 'undefined' ? true : valid;\n\n        if (!movingBack) {\n          updateStepValidationFlag(proceed);\n        }\n\n        if (proceed) {\n          if (!movingBack) {\n            // looks like we are moving forward, 'reduce' a new array of step>validated values we need to check and\n            // ... 'some' that to get a decision on if we should allow moving forward\n            passThroughStepsNotValid = props.steps.reduce(function (a, c, i) {\n              if (i >= compState && i < evt.target.value) {\n                a.push(c.validated);\n              }\n\n              return a;\n            }, []).some(function (c) {\n              return c === false;\n            });\n          }\n        }\n      }).catch(function () {\n        // Promise based validation was a fail (i.e reject())\n        if (!movingBack) {\n          updateStepValidationFlag(false);\n        }\n      }).then(function () {\n        // this is like finally(), executes if error no no error\n        if (proceed && !passThroughStepsNotValid) {\n          if (evt.target.value === props.steps.length - 1 && compState === props.steps.length - 1) {\n            adjustNavState(props.steps.length);\n          } else {\n            adjustNavState(evt.target.value);\n          }\n        }\n      }).catch(function (e) {\n        if (e) {\n          // see note below called \"CatchRethrowing\"\n          // ... plus the finally then() above is what throws the JS Error so we need to catch that here specifically\n          setTimeout(function () {\n            throw e;\n          });\n        }\n      });\n    }\n  }; // move next via next button\n\n\n  var next = function next() {\n    abstractStepMoveAllowedToPromise().then(function () {\n      var proceed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      // validation was a success (promise or sync validation). In it was a Promise's resolve() then proceed will be undefined,\n      // ... so make it true. Or else 'proceed' will carry the true/false value from sync validation\n      updateStepValidationFlag(proceed);\n\n      if (proceed) {\n        adjustNavState(compState + 1);\n      }\n    }).catch(function (e) {\n      if (e) {\n        // CatchRethrowing: as we wrap StepMoveAllowed() to resolve as a Promise, the then() is invoked and the next React Component is loaded.\n        // ... during the render, if there are JS errors thrown (e.g. ReferenceError) it gets swallowed by the Promise library and comes in here (catch)\n        // ... so we need to rethrow it outside the execution stack so it behaves like a notmal JS error (i.e. halts and prints to console)\n        //\n        setTimeout(function () {\n          throw e;\n        });\n      } // Promise based validation was a fail (i.e reject())\n\n\n      updateStepValidationFlag(false);\n    });\n  }; // move behind via previous button\n\n\n  var previous = function previous() {\n    if (compState > 0) {\n      adjustNavState(compState - 1);\n    }\n  }; // update step's validation flag\n\n\n  var updateStepValidationFlag = function updateStepValidationFlag() {\n    var val = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    props.steps[compState].validated = val; // note: if a step component returns 'underfined' then treat as \"true\".\n  };\n\n  var activeComponentRef = (0, _react.useRef)(null); // are we allowed to move forward? via the next button or via jumpToStep?\n\n  var stepMoveAllowed = function stepMoveAllowed() {\n    var skipValidationExecution = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    var proceed = false;\n\n    if (props.dontValidate) {\n      proceed = true;\n    } else {\n      if (skipValidationExecution) {\n        // we are moving backwards in steps, in this case dont validate as it means the user is not commiting to \"save\"\n        proceed = true;\n      } else if (isStepAtIndexHOCValidationBased(compState)) {\n        // the user is using a higer order component (HOC) for validation (e.g react-validation-mixin), this wraps the StepZilla steps as a HOC,\n        // so use hocValidationAppliedTo to determine if this step needs the aync validation as per react-validation-mixin interface\n        proceed = activeComponentRef.current.refs.component.isValidated();\n      } else if (activeComponentRef.current === null || typeof activeComponentRef.current.isValidated === 'undefined') {\n        // if its a form component, it should have implemeted a public isValidated class (also pure componenets wont even have refs - i.e. a empty object). If not then continue\n        proceed = true;\n      } else {\n        // user is moving forward in steps, invoke validation as its available\n        proceed = activeComponentRef.current.isValidated();\n      }\n    }\n\n    return proceed;\n  };\n\n  var isStepAtIndexHOCValidationBased = function isStepAtIndexHOCValidationBased(stepIndex) {\n    return props.hocValidationAppliedTo && props.hocValidationAppliedTo.length > 0 && props.hocValidationAppliedTo.indexOf(stepIndex) > -1;\n  }; // a validation method is each step can be sync or async (Promise based), this utility abstracts the wrapper stepMoveAllowed to be Promise driven regardless of validation return type\n\n\n  var abstractStepMoveAllowedToPromise = function abstractStepMoveAllowedToPromise(movingBack) {\n    return _promise.default.resolve(stepMoveAllowed(movingBack));\n  }; // get the classmame of steps\n\n\n  var getClassName = function getClassName(className, i) {\n    var liClassName = '';\n\n    if (navState && navState.styles) {\n      liClassName = \"\".concat(className, \"-\").concat(navState.styles[i]); // if step ui based navigation is disabled, then dont highlight step\n\n      if (!props.stepsNavigation) {\n        liClassName += ' no-hl';\n      }\n    }\n\n    return liClassName;\n  }; // render the steps as stepsNavigation\n\n\n  var renderSteps = function renderSteps() {\n    return props.steps.map(function (s, i) {\n      return _react.default.createElement(\"li\", {\n        className: getClassName('progtrckr', i),\n        onClick: function onClick(evt) {\n          _jumpToStep(evt);\n        },\n        key: i,\n        value: i\n      }, _react.default.createElement(\"em\", null, i + 1), _react.default.createElement(\"span\", null, props.steps[i].name));\n    });\n  };\n\n  var _getPrevNextBtnLayout = getPrevNextBtnLayout(compState),\n      nextStepText = _getPrevNextBtnLayout.nextStepText,\n      showNextBtn = _getPrevNextBtnLayout.showNextBtn,\n      showPreviousBtn = _getPrevNextBtnLayout.showPreviousBtn; // clone the step component dynamically and tag it as activeComponent so we can validate it on next. also bind the jumpToStep piping method\n\n\n  var cloneExtensions = {\n    jumpToStep: function jumpToStep(t) {\n      _jumpToStep(t);\n    }\n  };\n  var componentPointer = null;\n  var compToRender = null;\n\n  if (props.steps[compState]) {\n    componentPointer = props.steps[compState].component; // S: ref binding -----\n    // we need to bind a ref to it so we can use the imperitive \"isValidated\" method when needed to prevent navigation\n    // ... we only can do this if its a (1) React Class based component or (2) A Hooks based stateful component wrapped in forwardRef\n    // (1) can only update refs if its a regular React component (not a pure component - i.e. function components with no state), so lets check that\n\n    if (componentPointer instanceof _react.Component || componentPointer.type && componentPointer.type.prototype instanceof _react.Component) {\n      // unit test deteceted that instanceof Component can be in either of these locations so test both (not sure why this is the case)\n      cloneExtensions.ref = activeComponentRef;\n    } else {\n      // (2) after react hooks was released, functional components can have state and therefore support refs\n      // ... we do this via forwardRefs. So we need to support this as well\n      // ... after testing, if both the below types are objects then it's a hooks function component wrapped in forwardRef\n      if (_typeof(componentPointer) === 'object' && _typeof(componentPointer.type) === 'object') {\n        cloneExtensions.ref = activeComponentRef;\n      }\n    } // E: ref binding -----\n\n\n    compToRender = _react.default.cloneElement(componentPointer, cloneExtensions);\n  } // main render of stepzilla container\n\n\n  return _react.default.createElement(\"div\", {\n    className: \"multi-step\",\n    onKeyDown: function onKeyDown(evt) {\n      handleKeyDown(evt);\n    }\n  }, props.showSteps ? _react.default.createElement(\"ol\", {\n    className: \"progtrckr\"\n  }, renderSteps()) : _react.default.createElement(\"span\", null), compToRender, _react.default.createElement(\"div\", {\n    style: props.showNavigation ? {} : hidden,\n    className: \"footer-buttons\"\n  }, _react.default.createElement(\"button\", {\n    type: \"button\",\n    style: showPreviousBtn ? {} : hidden,\n    className: props.backButtonCls,\n    onClick: function onClick() {\n      previous();\n    },\n    id: \"prev-button\"\n  }, props.backButtonText), _react.default.createElement(\"button\", {\n    type: \"button\",\n    style: showNextBtn ? {} : hidden,\n    className: props.nextButtonCls,\n    onClick: function onClick() {\n      next();\n    },\n    id: \"next-button\"\n  }, nextStepText)));\n}\n\nStepZilla.defaultProps = {\n  showSteps: true,\n  showNavigation: true,\n  stepsNavigation: true,\n  prevBtnOnLastStep: true,\n  dontValidate: false,\n  preventEnterSubmission: false,\n  startAtStep: 0,\n  nextButtonText: 'Next',\n  nextButtonCls: 'btn btn-prev btn-primary btn-lg pull-right',\n  backButtonText: 'Previous',\n  backButtonCls: 'btn btn-next btn-primary btn-lg pull-left',\n  hocValidationAppliedTo: []\n};\nStepZilla.propTypes = {\n  steps: _propTypes.default.arrayOf(_propTypes.default.shape({\n    name: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.object]).isRequired,\n    component: _propTypes.default.element.isRequired\n  })).isRequired,\n  showSteps: _propTypes.default.bool,\n  showNavigation: _propTypes.default.bool,\n  stepsNavigation: _propTypes.default.bool,\n  prevBtnOnLastStep: _propTypes.default.bool,\n  dontValidate: _propTypes.default.bool,\n  preventEnterSubmission: _propTypes.default.bool,\n  startAtStep: _propTypes.default.number,\n  nextButtonText: _propTypes.default.string,\n  nextButtonCls: _propTypes.default.string,\n  backButtonCls: _propTypes.default.string,\n  backButtonText: _propTypes.default.string,\n  hocValidationAppliedTo: _propTypes.default.array,\n  onStepChange: _propTypes.default.func\n};"],"mappings":"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"},"metadata":{},"sourceType":"script"}